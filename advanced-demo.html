<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Editor Library - Advanced Demo</title>
    
    <!-- Include CSS dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism.min.css" rel="stylesheet">
    
    <!-- Include editor styles -->
    <link href="./dist/style.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>JS Editor Library - Advanced Demo</h1>
        <p>This demonstrates different configurations of the JS Editor library.</p>
        
        <div class="row mb-4">
            <div class="col-md-6">
                <h3>Default Editor (with toolbar)</h3>
                <div id="editor-default" style="min-height: 200px; border: 1px solid #ddd; padding: 1rem;"></div>
            </div>
            
            <div class="col-md-6">
                <h3>Minimal Editor (no toolbar)</h3>
                <div id="editor-minimal" style="min-height: 200px; border: 1px solid #ddd; padding: 1rem;"></div>
            </div>
        </div>
        
        <div class="row mb-4">
            <div class="col-md-6">
                <h3>Custom Toolbar Configuration</h3>
                <div id="editor-custom" style="min-height: 200px; border: 1px solid #ddd; padding: 1rem;"></div>
            </div>
            
            <div class="col-md-6">
                <h3>Output</h3>
                <div class="tabs">
                    <button class="btn btn-sm btn-outline-primary me-2" onclick="showTab('markdown')">Markdown</button>
                    <button class="btn btn-sm btn-outline-primary" onclick="showTab('html')">HTML</button>
                </div>
                
                <div id="markdown-output" class="tab-content mt-2">
                    <h5>Markdown:</h5>
                    <pre id="markdown-content" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; max-height: 300px; overflow-y: auto;"></pre>
                </div>
                
                <div id="html-output" class="tab-content mt-2" style="display: none;">
                    <h5>HTML:</h5>
                    <pre id="html-content" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; max-height: 300px; overflow-y: auto;"></pre>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <h3>API Demo</h3>
                <div class="btn-group" role="group">
                    <button id="get-markdown" class="btn btn-primary">Get Markdown</button>
                    <button id="get-html" class="btn btn-secondary">Get HTML</button>
                    <button id="set-content" class="btn btn-info">Set Sample Content</button>
                    <button id="clear-all" class="btn btn-warning">Clear All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Include JS dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

    <!-- Include the editor library -->
    <script type="module">
        import Editor from './dist/js-editor.es.js';

        // 1. Default editor with full toolbar
        const editorDefault = new Editor({
            id: 'editor-default',
            placeholder: 'Default editor with full toolbar...',
            markdown: `# Default Editor
            
This editor has the **full toolbar** enabled.

Try using the toolbar buttons above!`
        });

        // 2. Minimal editor without toolbar
        const editorMinimal = new Editor({
            id: 'editor-minimal',
            placeholder: 'Minimal editor without toolbar...',
            toolbar: false,
            markdown: `# Minimal Editor
            
This editor has **no toolbar**.

You can still type markdown syntax directly:
- **bold text**
- *italic text*
- \`code\``
        });

        // 3. Custom toolbar configuration
        const customToolbarConfig = [
            {
                group: [
                    { class: 'editor-toolbar-bold', icon: 'fa-bold', title: 'Bold' },
                    { class: 'editor-toolbar-italic', icon: 'fa-italic', title: 'Italic' }
                ]
            },
            {
                group: [
                    { class: 'editor-toolbar-ul', icon: 'fa-list', title: 'List' },
                    { class: 'editor-toolbar-code', icon: 'fa-code', title: 'Code' }
                ]
            }
        ];

        const editorCustom = new Editor({
            id: 'editor-custom',
            placeholder: 'Custom toolbar editor...',
            toolbar: {
                config: customToolbarConfig
            },
            markdown: `# Custom Toolbar
            
This editor has a **custom toolbar** with only selected buttons.

Available buttons: Bold, Italic, List, Code.`
        });

        // API Demo functions
        let activeEditor = editorDefault;

        // Auto-update display from default editor
        editorDefault.on('change', () => {
            updateDisplay(editorDefault);
        });

        editorDefault.on('ready', () => {
            updateDisplay(editorDefault);
        });

        function updateDisplay(editor) {
            activeEditor = editor;
            const markdown = editor.getMarkdown();
            document.getElementById('markdown-content').textContent = markdown;
        }

        // Button event listeners
        document.getElementById('get-markdown').addEventListener('click', () => {
            const markdown = activeEditor.getMarkdown();
            document.getElementById('markdown-content').textContent = markdown;
            showTab('markdown');
        });

        document.getElementById('get-html').addEventListener('click', () => {
            const html = activeEditor.getHtml();
            document.getElementById('html-content').textContent = html;
            showTab('html');
        });

        document.getElementById('set-content').addEventListener('click', () => {
            const sampleContent = `# Sample Content

This is **sample content** loaded via the API.

## Features Demo

### Lists
- First item
- Second item
- Third item

### Code Block
\`\`\`javascript
console.log('Hello from JS Editor!');
\`\`\`

### Table
| Column 1 | Column 2 |
|----------|----------|
| Data A   | Data B   |
| Data C   | Data D   |

### Task List
- [x] Completed task
- [ ] Pending task`;

            editorDefault.setMarkdown(sampleContent);
            editorMinimal.setMarkdown(sampleContent);
            editorCustom.setMarkdown(sampleContent);
        });

        document.getElementById('clear-all').addEventListener('click', () => {
            editorDefault.clear();
            editorMinimal.clear();
            editorCustom.clear();
            document.getElementById('markdown-content').textContent = '';
            document.getElementById('html-content').textContent = '';
        });

        // Tab switching function
        window.showTab = function(tab) {
            const markdownTab = document.getElementById('markdown-output');
            const htmlTab = document.getElementById('html-output');
            
            if (tab === 'markdown') {
                markdownTab.style.display = 'block';
                htmlTab.style.display = 'none';
            } else {
                markdownTab.style.display = 'none';
                htmlTab.style.display = 'block';
            }
        };

        // Log editor instances for debugging
        console.log('Editor instances created:');
        console.log('Default:', editorDefault);
        console.log('Minimal:', editorMinimal);
        console.log('Custom:', editorCustom);
        console.log('All instances:', Editor.getAllInstances());
    </script>
</body>
</html>
